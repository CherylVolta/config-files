# author: Waoap
# version: 1.1
# update: 2022/6/7 14:44
mixin: # Mixin é…ç½®æ–‡ä»¶
  dns:
    enable: true
    ipv6: true # true/false æ˜¯å¦å¯ç”¨ ipv6 æ”¯æŒ
    # ä» v0.18.8 ç‰ˆæœ¬å¼€å§‹ï¼ŒTUN æ¨¡å¼å»ºè®®ä½¿ç”¨ fake-ip æ¨¡å¼ï¼Œredir-host å°†æ— æ³•è¿›è¡Œè¿œç«¯ DNS è§£æ
    enhanced-mode: fake-ip # redir-host/fake-ip
    use-hosts: true # æŸ¥è¯¢ hosts å¹¶è¿”å› IP è®°å½•
    hosts:
      "mtalk.google.com": 108.177.125.188
      "services.googleapis.cn": 74.125.203.94
      "raw.githubusercontent.com": 151.101.76.133
    # Hostnames in this list will not be resolved with fake IPs
    # i.e. questions to these domain names will always be answered with their
    # real IP addresses
    default-nameserver: # ç”¨äº DoH/DoT çš„ Bootstrap Server
      - 223.5.5.5 # é˜¿é‡Œå…¬å…± DNS
      - 119.29.29.29 # DNSPod å…¬å…± DNS
      - 180.76.76.76 # Baidu å…¬å…± DNS
    fake-ip-range: 198.18.0.1/16 # Fake IP åœ°å€æ±  (CIDR å½¢å¼)
    fake-ip-filter: # å¾®è½¯ç³» APP æ— æ³•ç™»é™†ä½¿ç”¨ç­‰é—®é¢˜ï¼Œé€šè¿‡æ·»åŠ  fake-ip-filter è§£å†³
      # === Local ===
      - "*.lan"
      - "*.local"
      # === Linksys Wireless Router ===
      - "*.linksys.com"
      - "*.linksyssmartwifi.com"
      # === Apple Software Update Service ===
      - "swscan.apple.com"
      - "mesu.apple.com"
      # === Microsoft Windows Serivice ===
      - "*.msftncsi.com"
      # - "*.msftconnecttest.com"
      - "*.ipv6.microsoft.com"
      # === NTP Service ===
      - "time.*.com"
      - "time.*.gov"
      - "time.*.edu.cn"
      - "time.*.apple.com"

      - "time1.*.com"
      - "time2.*.com"
      - "time3.*.com"
      - "time4.*.com"
      - "time5.*.com"
      - "time6.*.com"
      - "time7.*.com"

      - "ntp.*.com"
      - "ntp.*.com"
      - "ntp1.*.com"
      - "ntp2.*.com"
      - "ntp3.*.com"
      - "ntp4.*.com"
      - "ntp5.*.com"
      - "ntp6.*.com"
      - "ntp7.*.com"

      - "*.time.edu.cn"
      - "*.ntp.org.cn"
      - "+.pool.ntp.org"

      - "time1.cloud.tencent.com"
      # === Music Service ===
      ## NetEase
      - "+.music.163.com"
      - "*.126.net"
      ## Baidu
      - "musicapi.taihe.com"
      - "music.taihe.com"
      ## Kugou
      - "songsearch.kugou.com"
      - "trackercdn.kugou.com"
      ## Kuwo
      - "*.kuwo.cn"
      ## JOOX
      - "api-jooxtt.sanook.com"
      - "api.joox.com"
      - "joox.com"
      ## QQ
      - "+.y.qq.com"
      - "+.music.tc.qq.com"
      - "aqqmusic.tc.qq.com"
      - "+.stream.qqmusic.qq.com"
      ## Xiami
      - "*.xiami.com"
      ## Migu
      - "+.music.migu.cn"
      # === Game Service ===
      ## Nintendo Switch
      - "+.srv.nintendo.net"
      ## Sony PlayStation
      - "+.stun.playstation.net"
      ## Microsoft Xbox
      - "xbox.*.microsoft.com"
      - "+.xboxlive.com"
      # === Other ===
      ## QQ Quick Login
      - "localhost.ptlogin2.qq.com"
      ## Golang
      - "proxy.golang.org"
      ## STUN Server
      - "stun.*.*"
      - "stun.*.*.*"
      # ... ...
    nameserver: # GeoIP ä¸º CN æ—¶ä½¿ç”¨çš„ DNS NameServerï¼ˆä½¿ç”¨DoH/DoTï¼‰
      # - tls://dns.alidns.com:853 # é˜¿é‡Œ DoT
      # - tls://doh.pub:853 # DNSPod DoT
      # - https://dns.alidns.com/dns-query  # é˜¿é‡Œ DoH
      # - https://doh.pub/dns-query   # DNSPod DoH
      - 223.6.6.6
      - 223.5.5.5
      - 119.29.29.29
      # ... ...
    fallback: # GeoIP ä¸æ˜¯ CN æ—¶ä½¿ç”¨çš„ DNS NameServerï¼ˆä½¿ç”¨DoH/DoTï¼‰
      # - tls://dns.google:853 # Google DoT
      # - tls://one.one.one.one:853 # cloudflare DoT
      # - https://dns.google/dns-query # cloudflare DoH
      # - https://1.1.1.1/dns-query # Google DoH
      - 8.8.8.8
      - 1.1.1.1
      # ... ...
    fallback-filter:
      geoip: true # å¯ç”¨ GeoIP
      ip-cidr:
        - 240.0.0.0/4
        - 0.0.0.0/32
        - 127.0.0.1/8
      domain:
        - +.google.com
        - +.facebook.com
        - +.twitter.com
        - +.youtube.com
        - +.xn--ngstr-lra8j.com
        - +.google.cn
        - +.googleapis.cn
        - +.googleapis.com
        - +.gvt1.com
  # interface-name: Ethernet  # å‡ºå£ç½‘å¡åç§°ï¼ˆå·²æ³¨é‡Šï¼‰ï¼Œå»ºè®®ä½¿ç”¨è‡ªåŠ¨æ£€æµ‹å‡ºå£ç½‘å¡æ¨¡å¼ğŸ‘‡
  tun: # Tun é…ç½®
    enable: true
    # ä½¿ç”¨ system statck éœ€è¦ Clash Premium 2021.05.08 åŠæ›´é«˜ç‰ˆæœ¬
    stack: system # gvisor/system ä½¿ç”¨ system stack è¯·æŒ‰ç…§æœ¬æ–‡åé¢é˜²ç«å¢™æ”¾è¡Œç¨‹åº
    dns-hijack:
      - 198.18.0.2:53 # æœ¬åœ°åŠ«æŒ DNS åœ°å€ï¼Œæ— éœ€ä¿®æ”¹
    auto-route: true
    auto-detect-interface: true # è‡ªåŠ¨æ£€æµ‹å‡ºå£ç½‘å¡
